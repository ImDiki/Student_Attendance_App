<Page x:Class="Student_Attendance_System.Views.ScanPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Scan / Attendance" Background="#F4F6F9">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Attendance Scanning" FontSize="28" FontWeight="Bold" Foreground="#2C3E50" Margin="0,0,0,15"/>

        <TextBox x:Name="txtScannerInput" Width="0" Height="0" Opacity="0"/>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#1B2631" CornerRadius="10" Margin="0,0,10,0">
                <Grid>
                    <Image x:Name="CameraPreview" Stretch="Uniform"/>

                    <Border Width="260" Height="100" BorderBrush="#3498DB" BorderThickness="2" CornerRadius="5" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Grid>
                            <Rectangle Fill="#3498DB" Height="1" VerticalAlignment="Center" Opacity="0.5"/>
                        </Grid>
                    </Border>

                    <TextBlock Text="Align Barcode within the frame" Foreground="White" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,20" Opacity="0.5"/>
                </Grid>
            </Border>

            <Border Grid.Column="1" Background="White" CornerRadius="15" Padding="25">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="15" Opacity="0.1"/>
                </Border.Effect>

                <StackPanel x:Name="ResultPanel" VerticalAlignment="Center">
                    <TextBlock Text="Student Information" FontSize="20" FontWeight="Bold" Foreground="#34495E" Margin="0,0,0,20" HorizontalAlignment="Center"/>

                    <Border Width="140" Height="140" CornerRadius="70" Background="#F2F3F4" Margin="0,0,0,20">
                        <Ellipse x:Name="imgStudentProfile" Fill="#D5DBDB" Stretch="UniformToFill"/>
                    </Border>

                    <Separator Margin="0,0,0,20" Background="#F2F3F4"/>

                    <TextBlock Text="Name (氏名)" Foreground="Gray" FontSize="14"/>
                    <TextBlock x:Name="lblScannedName" Text="Waiting for scan..." FontSize="22" FontWeight="Bold" Foreground="#2C3E50" Margin="0,5,0,15"/>

                    <TextBlock Text="Student ID (学籍番号)" Foreground="Gray" FontSize="14"/>
                    <TextBlock x:Name="lblScannedID" Text="----" FontSize="18" FontWeight="SemiBold" Margin="0,5,0,20"/>

                    <Border x:Name="AttendanceBadge" Background="#27AE60" CornerRadius="10" Padding="15,10" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock Text="出席 ✅ PRESENT" Foreground="White" FontWeight="Bold" FontSize="18"/>
                        </StackPanel>
                    </Border>

                    <TextBlock x:Name="lblStatusMessage" Text="Please scan the barcode on the student ID card." FontSize="12" Foreground="Gray" HorizontalAlignment="Center" Margin="0,15,0,0" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
        </Grid>

        <Button Grid.Row="2" Content="START SCANNER" Width="300" Height="50" Background="#3498DB" Foreground="White" FontWeight="Bold" FontSize="16" BorderThickness="0" Margin="0,20,0,0" Click="btnStart_Click">
            <Button.Resources>
                <Style TargetType="Border">
                    <Setter Property="CornerRadius" Value="25"/>
                </Style>
            </Button.Resources>
        </Button>
    </Grid>
</Page>