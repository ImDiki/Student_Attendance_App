<Page x:Class="Student_Attendance_System.Views.ScanPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Scan / Attendance" Background="#F4F6F9"
      PreviewMouseDown="Page_PreviewMouseDown">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Attendance Scanning" FontSize="28" FontWeight="Bold" Foreground="#2C3E50" Margin="0,0,0,15"/>

        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right">
            <TextBlock Text="Scanner Input: " VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBox x:Name="txtScannerInput" Width="200" Height="30" 
                     Background="Yellow" FontWeight="Bold" VerticalContentAlignment="Center"
                     KeyDown="txtScannerInput_KeyDown"/>
        </StackPanel>

        <Grid Grid.Row="1" Margin="0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#1B2631" CornerRadius="10" Margin="0,0,10,0">
                <Grid>
                    <Image x:Name="CameraPreview" Stretch="Uniform"/>
                    <Border Width="260" Height="100" BorderBrush="#3498DB" BorderThickness="2" CornerRadius="5" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Rectangle Fill="#3498DB" Height="1" VerticalAlignment="Center" Opacity="0.5"/>
                    </Border>
                </Grid>
            </Border>

            <Border Grid.Column="1" Background="White" CornerRadius="15" Padding="25">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="15" Opacity="0.1"/>
                </Border.Effect>
                <StackPanel x:Name="ResultPanel" VerticalAlignment="Center">
                    <TextBlock Text="Student Information" FontSize="20" FontWeight="Bold" Foreground="#34495E" HorizontalAlignment="Center" Margin="0,0,0,20"/>
                    <Border Width="140" Height="140" CornerRadius="70" Background="#F2F3F4" Margin="0,0,0,20">
                        <Ellipse x:Name="imgStudentProfile" Fill="#D5DBDB" Stretch="UniformToFill"/>
                    </Border>
                    <Separator Margin="0,0,0,20"/>

                    <TextBlock Text="Name (氏名)" Foreground="Gray" FontSize="14"/>
                    <TextBlock x:Name="lblScannedName" Text="Waiting..." FontSize="22" FontWeight="Bold" Margin="0,5,0,15"/>

                    <TextBlock Text="Student ID (学籍番号)" Foreground="Gray" FontSize="14"/>
                    <TextBlock x:Name="lblScannedID" Text="----" FontSize="18" FontWeight="SemiBold" Margin="0,5,0,20"/>

                    <Border x:Name="AttendanceBadge" Background="#27AE60" CornerRadius="10" Padding="15,10" Visibility="Collapsed">
                        <TextBlock Text="出席 ✅ PRESENT" Foreground="White" FontWeight="Bold" FontSize="18" HorizontalAlignment="Center"/>
                    </Border>

                    <TextBlock x:Name="lblStatusMessage" Text="Scan card to start" FontSize="12" Foreground="Gray" HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </Border>
        </Grid>

        <Button Grid.Row="2" x:Name="btnStart" Content="START SYSTEM" Width="300" Height="50" Background="#3498DB" Foreground="White" FontWeight="Bold" Click="btnStart_Click" Cursor="Hand"/>
    </Grid>
</Page>